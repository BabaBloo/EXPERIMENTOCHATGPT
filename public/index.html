<!DOCTYPE html>
<html lang="es">
<head>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0F3FJFRBSG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-0F3FJFRBSG');
  </script>

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-N7R6CHP6');</script>
  <!-- End Google Tag Manager -->

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Evita enviar Referer al abrir wa.me -->
  <meta name="referrer" content="no-referrer">
  <title>Casino Ganamos</title>

  <!-- Enlace al archivo de estilo CSS -->
  <link rel="stylesheet" href="estilo.css" />
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  
  <!-- Icono del sitio -->
  <link rel="shortcut icon" href="./img/logopixelzulma-removebg-preview.png" type="image/x-icon"/>

  <!-- Animaciones -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

  <!-- Frases públicas -->
  <script src="frases.js" defer></script>

  <!-- Script limpio: no tiene números, hace POST a /api/go-wa -->
  <script defer>
  document.addEventListener('DOMContentLoaded', function () {
    const boton = document.getElementById('whatsappButton');

    boton.addEventListener('pointerdown', function() {
      const nombre = document.getElementById('nombreUsuario').value.trim();
      if (!nombre) {
        boton.setAttribute('href', '#');
        return;
      }

      // frase aleatoria desde frases.js (público)
      const frase = (window.frases && window.frases.length)
        ? window.frases[Math.floor(Math.random() * window.frases.length)]
        : '';

      // Push para GTM si querés trackear clics (no expone números)
      try {
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({ event: 'wa_click', nombre: nombre });
      } catch (e) {
        // no importa si falla
      }

      // Creamos un form oculto y lo enviamos por POST al serverless (abrirá en nueva pestaña)
      const form = document.createElement('form');
      form.method = 'POST';
      form.action = '/api/go-wa'; // ruta serverless en Vercel
      form.target = '_blank';
      form.style.display = 'none';

      const inputNombre = document.createElement('input');
      inputNombre.name = 'nombre';
      inputNombre.value = nombre;
      form.appendChild(inputNombre);

      const inputFrase = document.createElement('input');
      inputFrase.name = 'frase';
      inputFrase.value = frase;
      form.appendChild(inputFrase);

      document.body.appendChild(form);
      form.submit();

      // limpieza
      setTimeout(()=> form.remove(), 500);
    });

    // Validación de click para evitar envíos vacíos
    boton.addEventListener('click', function(e) {
      const nombre = document.getElementById('nombreUsuario').value.trim();
      if (!nombre) {
        e.preventDefault();
        alert("Por favor escribe tu nombre antes de continuar.");
      }
    });
  });
  </script>
</head>

<body>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N7R6CHP6"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

  <!-- Logo -->
  <div class="logo animate_animated animate_flip">
    <img src="./img/diseño.PNG" alt="Ganamos.co">
  </div>

  <!-- Título principal -->
  <div class="main-title">
    <p>Para crear tu cuenta</p>
    <p>envíanos un Whatsapp</p>
    <h2>haciendo click en el botón de abajo</h2>
  </div>
  
  <!-- Nombre Input -->
  <div style="text-align: center; margin: 20px;">
    <input type="text" id="nombreUsuario" placeholder="Escribe tu nombre aquí" style="padding: 10px; width: 80%; max-width: 300px;"/>
  </div>

  <!-- WhatsApp Button -->
  <div class="whatsapp" style="text-align:center;">
    <a class="button" href="#" target="_blank" id="whatsappButton" style="display:inline-flex; align-items:center; gap:8px; padding:12px 18px; background:#25D366; color:#fff; border-radius:8px; text-decoration:none;">
      <span> Crea tu usuario </span>
      <img src="./img/whatsapp-64.png" alt="WhatsApp Logo" style="height:20px;">
    </a>
  </div>

  <!-- Información -->
  <div class="MINIMO" style="text-align:center; margin-top:14px;">
    <p>Minimo de Carga $3000</p>
  </div>

  <div class="info-section" style="text-align:center; margin-top:12px;">
    <img src="./img/bank_6719375.png" alt="Logo del banco" class="info-logo" style="height:30px;">
    <p class="info-text">Aceptamos transferencias bancarias.</p>
  </div>

  <div class="info-section" style="text-align:center;">
    <img src="./img/24-hours_1274033.png" alt="Disponibilidad 24 horas" class="info-logo" style="height:30px;">
    <p class="info-text">Estamos cargando las 24 hs todos los días.</p>
  </div>

  <div class="TERMINO" style="text-align:center; margin-top:8px;">
    <p class="info-text">Prohibido el juego de azar a menores de 18 años.</p>
  </div>

</body>
</html>
